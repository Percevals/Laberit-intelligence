<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dashboard de Inmunidad Digital DII 4.0 | {{WEEK_DATE}}</title>
<style>
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Arial, sans-serif;
    background-color: #091F2C;
    color: #ffffff;
    line-height: 1.6;
}

.container {
    max-width: 1400px;
    margin: 0 auto;
    padding: 20px;
}

/* Header Section */
.header {
    background: linear-gradient(135deg, #1A2B3D 0%, #0D1929 100%);
    padding: 30px;
    border-radius: 16px;
    margin-bottom: 30px;
    border: 1px solid rgba(180, 181, 223, 0.2);
}

.header h1 {
    font-size: 32px;
    background: linear-gradient(45deg, #B4B5DF, #6B9BD1);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    margin-bottom: 10px;
}

.header-subtitle {
    color: #A6BBC8;
    font-size: 16px;
}

/* DII Formula Display */
.dii-formula {
    background: rgba(180, 181, 223, 0.1);
    padding: 20px;
    border-radius: 12px;
    text-align: center;
    margin-bottom: 30px;
    border: 1px solid rgba(180, 181, 223, 0.2);
}

.formula-text {
    font-family: 'Courier New', monospace;
    font-size: 18px;
    color: #B4B5DF;
    letter-spacing: 2px;
}

/* Executive Summary - DII 4.0 Style */
.executive-summary {
    background: linear-gradient(135deg, rgba(26, 43, 61, 0.8), rgba(13, 25, 41, 0.9));
    padding: 30px;
    border-radius: 16px;
    margin-bottom: 30px;
    border: 2px solid rgba(180, 181, 223, 0.3);
}

.summary-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
    gap: 24px;
    margin-bottom: 24px;
}

.summary-item {
    background: rgba(180, 181, 223, 0.05);
    padding: 20px;
    border-radius: 12px;
    text-align: center;
    border: 1px solid rgba(180, 181, 223, 0.1);
    transition: all 0.3s ease;
}

.summary-item:hover {
    background: rgba(180, 181, 223, 0.1);
    transform: translateY(-2px);
}

.summary-number {
    font-size: 48px;
    font-weight: 700;
    margin-bottom: 8px;
    background: linear-gradient(45deg, #FFFFFF, #B4B5DF);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
}

.summary-label {
    font-size: 14px;
    color: #A6BBC8;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

/* DII Dimensions Grid */
.dimensions-section {
    background: rgba(26, 43, 61, 0.5);
    padding: 30px;
    border-radius: 16px;
    margin-bottom: 30px;
    border: 1px solid rgba(180, 181, 223, 0.2);
}

.dimensions-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
    gap: 16px;
}

.dimension-card {
    background: rgba(13, 25, 41, 0.7);
    padding: 16px;
    border-radius: 8px;
    text-align: center;
    border: 1px solid rgba(180, 181, 223, 0.1);
}

.dimension-name {
    font-size: 14px;
    font-weight: 600;
    color: #B4B5DF;
    margin-bottom: 8px;
}

.dimension-value {
    font-size: 24px;
    font-weight: 700;
    color: #FFFFFF;
}

.dimension-impact {
    font-size: 12px;
    color: #A6BBC8;
    margin-top: 4px;
}

/* Maturity Stages */
.maturity-indicator {
    display: flex;
    justify-content: space-between;
    align-items: center;
    background: rgba(180, 181, 223, 0.05);
    padding: 20px;
    border-radius: 12px;
    margin-bottom: 30px;
}

.stage {
    flex: 1;
    text-align: center;
    padding: 10px;
    border-radius: 8px;
    margin: 0 5px;
    opacity: 0.4;
    transition: all 0.3s ease;
}

.stage.active {
    opacity: 1;
    transform: scale(1.05);
}

.stage-fragil {
    background: rgba(239, 68, 68, 0.2);
    border: 1px solid rgba(239, 68, 68, 0.3);
}

.stage-robusto {
    background: rgba(251, 191, 36, 0.2);
    border: 1px solid rgba(251, 191, 36, 0.3);
}

.stage-resiliente {
    background: rgba(59, 130, 246, 0.2);
    border: 1px solid rgba(59, 130, 246, 0.3);
}

.stage-adaptativo {
    background: rgba(34, 197, 94, 0.2);
    border: 1px solid rgba(34, 197, 94, 0.3);
}

/* Business Model Analysis */
.business-models-section {
    background: rgba(26, 43, 61, 0.6);
    padding: 30px;
    border-radius: 16px;
    margin-bottom: 30px;
    border: 1px solid rgba(180, 181, 223, 0.2);
}

.section-title {
    font-size: 24px;
    color: #B4B5DF;
    margin-bottom: 24px;
    display: flex;
    align-items: center;
    gap: 12px;
}

.archetype-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 20px;
}

.archetype-card {
    background: rgba(13, 25, 41, 0.8);
    padding: 24px;
    border-radius: 12px;
    border: 1px solid rgba(180, 181, 223, 0.15);
}

.archetype-title {
    font-size: 18px;
    font-weight: 600;
    margin-bottom: 16px;
    display: flex;
    align-items: center;
    gap: 8px;
}

.model-list {
    display: flex;
    flex-direction: column;
    gap: 12px;
}

.model-item {
    background: rgba(180, 181, 223, 0.05);
    padding: 12px 16px;
    border-radius: 8px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    transition: all 0.3s ease;
}

.model-item:hover {
    background: rgba(180, 181, 223, 0.1);
}

.model-name {
    font-size: 14px;
    font-weight: 500;
}

.model-score {
    display: flex;
    align-items: center;
    gap: 8px;
}

.dii-badge {
    padding: 4px 8px;
    border-radius: 4px;
    font-size: 12px;
    font-weight: 600;
}

.trend-indicator {
    font-size: 12px;
}

.trend-up { color: #22c55e; }
.trend-down { color: #ef4444; }
.trend-stable { color: #fbbf24; }

/* Incident Timeline */
.incidents-section {
    background: rgba(26, 43, 61, 0.5);
    padding: 30px;
    border-radius: 16px;
    margin-bottom: 30px;
    border: 1px solid rgba(180, 181, 223, 0.2);
}

.incident-timeline {
    display: flex;
    flex-direction: column;
    gap: 16px;
}

.incident-card {
    background: rgba(13, 25, 41, 0.7);
    padding: 20px;
    border-radius: 12px;
    border-left: 4px solid;
    transition: all 0.3s ease;
}

.incident-card:hover {
    transform: translateX(5px);
}

.incident-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: 12px;
}

.incident-meta {
    display: flex;
    gap: 16px;
    font-size: 13px;
    color: #A6BBC8;
}

.incident-impact {
    padding: 4px 12px;
    border-radius: 16px;
    font-size: 12px;
    font-weight: 600;
}

.impact-critical {
    background: rgba(239, 68, 68, 0.2);
    color: #ef4444;
}

.impact-high {
    background: rgba(251, 191, 36, 0.2);
    color: #f59e0b;
}

.impact-medium {
    background: rgba(59, 130, 246, 0.2);
    color: #3b82f6;
}

.incident-description {
    font-size: 14px;
    line-height: 1.6;
    margin-bottom: 12px;
}

.incident-insights {
    background: rgba(180, 181, 223, 0.05);
    padding: 12px;
    border-radius: 8px;
    font-size: 13px;
}

/* Threat Intelligence Matrix */
.threat-matrix {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 20px;
    margin-top: 24px;
}

.matrix-quadrant {
    background: rgba(13, 25, 41, 0.7);
    padding: 20px;
    border-radius: 12px;
    min-height: 180px;
    position: relative;
    border: 1px solid;
}

.q1 { border-color: rgba(34, 197, 94, 0.3); }
.q2 { border-color: rgba(59, 130, 246, 0.3); }
.q3 { border-color: rgba(251, 191, 36, 0.3); }
.q4 { border-color: rgba(239, 68, 68, 0.3); }

.quadrant-label {
    font-size: 14px;
    font-weight: 600;
    margin-bottom: 12px;
}

.quadrant-models {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
}

.model-chip {
    background: rgba(180, 181, 223, 0.1);
    padding: 4px 10px;
    border-radius: 16px;
    font-size: 12px;
    border: 1px solid rgba(180, 181, 223, 0.2);
}

/* Benchmarking Section */
.benchmarking-section {
    background: rgba(26, 43, 61, 0.6);
    padding: 30px;
    border-radius: 16px;
    margin-bottom: 30px;
    border: 1px solid rgba(180, 181, 223, 0.2);
}

.percentile-chart {
    background: rgba(13, 25, 41, 0.7);
    padding: 24px;
    border-radius: 12px;
    margin-bottom: 20px;
}

.percentile-bar {
    height: 40px;
    background: linear-gradient(to right, 
        rgba(239, 68, 68, 0.3) 0%, 
        rgba(251, 191, 36, 0.3) 25%, 
        rgba(59, 130, 246, 0.3) 50%, 
        rgba(34, 197, 94, 0.3) 75%);
    border-radius: 20px;
    position: relative;
    margin: 20px 0;
}

.percentile-markers {
    display: flex;
    justify-content: space-between;
    margin-top: 8px;
    font-size: 12px;
    color: #A6BBC8;
}

/* Recommendations */
.recommendations-section {
    background: linear-gradient(135deg, rgba(34, 197, 94, 0.1), rgba(26, 43, 61, 0.6));
    padding: 30px;
    border-radius: 16px;
    border: 1px solid rgba(34, 197, 94, 0.2);
}

.recommendation-grid {
    display: grid;
    gap: 16px;
}

.recommendation-card {
    background: rgba(13, 25, 41, 0.8);
    padding: 20px;
    border-radius: 12px;
    border-left: 4px solid;
    display: flex;
    align-items: flex-start;
    gap: 16px;
}

.priority-critical { border-color: #ef4444; }
.priority-high { border-color: #f59e0b; }
.priority-medium { border-color: #3b82f6; }

.recommendation-icon {
    font-size: 24px;
}

.recommendation-content {
    flex: 1;
}

.recommendation-title {
    font-size: 16px;
    font-weight: 600;
    margin-bottom: 8px;
}

.recommendation-models {
    display: flex;
    gap: 8px;
    margin-bottom: 8px;
}

.recommendation-impact {
    font-size: 13px;
    color: #A6BBC8;
}

/* Footer */
.footer {
    text-align: center;
    padding: 40px 20px;
    color: #A6BBC8;
    font-size: 14px;
}

.footer-links {
    display: flex;
    justify-content: center;
    gap: 24px;
    margin-top: 16px;
}

.footer-links a {
    color: #B4B5DF;
    text-decoration: none;
    transition: color 0.3s ease;
}

.footer-links a:hover {
    color: #FFFFFF;
}

/* Responsive Design */
@media (max-width: 768px) {
    .summary-grid {
        grid-template-columns: 1fr;
    }
    
    .threat-matrix {
        grid-template-columns: 1fr;
    }
    
    .archetype-grid {
        grid-template-columns: 1fr;
    }
}
</style>
</head>
<body>
<div class="container">
    <!-- Header -->
    <div class="header">
        <h1>Dashboard de Inmunidad Digital LATAM</h1>
        <p class="header-subtitle">Framework DII 4.0 | Semana del {{WEEK_DATE}} | Inteligencia para Resiliencia Digital</p>
    </div>

    <!-- DII Formula Display -->
    <div class="dii-formula">
        <div class="formula-text">DII = (TRD × AER) / (HFP × BRI × RRG)</div>
        <p style="margin-top: 8px; font-size: 14px; color: #A6BBC8;">
            Una fórmula. Cinco dimensiones. Un índice ejecutivo (1-10).
        </p>
    </div>

    <!-- Executive Summary -->
    <div class="executive-summary">
        <h2 class="section-title">📊 Resumen Ejecutivo - 30 Segundos</h2>
        
        <div class="summary-grid">
            <div class="summary-item">
                <div class="summary-number">{{IMMUNITY_AVG}}</div>
                <div class="summary-label">Inmunidad Promedio</div>
            </div>
            <div class="summary-item">
                <div class="summary-number">{{ATTACKS_WEEK}}</div>
                <div class="summary-label">Ataques Esta Semana</div>
            </div>
            <div class="summary-item">
                <div class="summary-number">{{TOP_THREAT_PCT}}</div>
                <div class="summary-label">{{TOP_THREAT_TYPE}}</div>
            </div>
            <div class="summary-item">
                <div class="summary-number">{{VICTIMS_LOW_IMMUNITY_PCT}}</div>
                <div class="summary-label">Víctimas con DII < 4.0</div>
            </div>
        </div>

        <div class="maturity-indicator">
            <div class="stage stage-fragil {{FRAGIL_ACTIVE}}">
                <div style="font-size: 24px;">😰</div>
                <div style="font-weight: 600;">FRÁGIL</div>
                <div style="font-size: 12px;">DII < 4.0</div>
                <div style="font-size: 11px; margin-top: 4px;">59% LATAM</div>
            </div>
            <div class="stage stage-robusto {{ROBUSTO_ACTIVE}}">
                <div style="font-size: 24px;">💪</div>
                <div style="font-weight: 600;">ROBUSTO</div>
                <div style="font-size: 12px;">DII 4.0-6.0</div>
                <div style="font-size: 11px; margin-top: 4px;">30% LATAM</div>
            </div>
            <div class="stage stage-resiliente {{RESILIENTE_ACTIVE}}">
                <div style="font-size: 24px;">🛡️</div>
                <div style="font-weight: 600;">RESILIENTE</div>
                <div style="font-size: 12px;">DII 6.0-8.0</div>
                <div style="font-size: 11px; margin-top: 4px;">10% LATAM</div>
            </div>
            <div class="stage stage-adaptativo {{ADAPTATIVO_ACTIVE}}">
                <div style="font-size: 24px;">🚀</div>
                <div style="font-weight: 600;">ADAPTATIVO</div>
                <div style="font-size: 12px;">DII > 8.0</div>
                <div style="font-size: 11px; margin-top: 4px;"><1% LATAM</div>
            </div>
        </div>

        <div style="background: rgba(180, 181, 223, 0.1); padding: 16px; border-radius: 8px; text-align: center;">
            <p style="font-size: 16px; font-weight: 500;">{{KEY_INSIGHT}}</p>
        </div>
    </div>

    <!-- DII Dimensions Analysis -->
    <div class="dimensions-section">
        <h2 class="section-title">⚡ Análisis de Dimensiones DII</h2>
        <div class="dimensions-grid">
            <div class="dimension-card">
                <div class="dimension-name">TRD</div>
                <div class="dimension-value">{{TRD_VALUE}}h</div>
                <div class="dimension-impact">Time to Revenue Disruption</div>
            </div>
            <div class="dimension-card">
                <div class="dimension-name">AER</div>
                <div class="dimension-value">1:{{AER_VALUE}}</div>
                <div class="dimension-impact">Attack Economics Ratio</div>
            </div>
            <div class="dimension-card">
                <div class="dimension-name">HFP</div>
                <div class="dimension-value">{{HFP_VALUE}}%</div>
                <div class="dimension-impact">Human Failure Probability</div>
            </div>
            <div class="dimension-card">
                <div class="dimension-name">BRI</div>
                <div class="dimension-value">{{BRI_VALUE}}%</div>
                <div class="dimension-impact">Blast Radius Index</div>
            </div>
            <div class="dimension-card">
                <div class="dimension-name">RRG</div>
                <div class="dimension-value">{{RRG_VALUE}}x</div>
                <div class="dimension-impact">Recovery Reality Gap</div>
            </div>
        </div>
    </div>

    <!-- Business Models by Archetype -->
    <div class="business-models-section">
        <h2 class="section-title">🏢 Estado de Inmunidad por Arquetipo de Negocio</h2>
        
        <div class="archetype-grid">
            <!-- Custodios -->
            <div class="archetype-card">
                <h3 class="archetype-title">🏛️ CUSTODIOS</h3>
                <p style="font-size: 13px; color: #A6BBC8; margin-bottom: 16px;">
                    Guardianes de activos críticos ajenos
                </p>
                <div class="model-list">
                    {{CUSTODIOS_MODELS}}
                </div>
            </div>

            <!-- Conectores -->
            <div class="archetype-card">
                <h3 class="archetype-title">🌐 CONECTORES</h3>
                <p style="font-size: 13px; color: #A6BBC8; margin-bottom: 16px;">
                    Facilitadores de transacciones
                </p>
                <div class="model-list">
                    {{CONECTORES_MODELS}}
                </div>
            </div>

            <!-- Procesadores -->
            <div class="archetype-card">
                <h3 class="archetype-title">⚙️ PROCESADORES</h3>
                <p style="font-size: 13px; color: #A6BBC8; margin-bottom: 16px;">
                    Transformadores de información en valor
                </p>
                <div class="model-list">
                    {{PROCESADORES_MODELS}}
                </div>
            </div>

            <!-- Redundantes -->
            <div class="archetype-card">
                <h3 class="archetype-title">🔄 REDUNDANTES</h3>
                <p style="font-size: 13px; color: #A6BBC8; margin-bottom: 16px;">
                    Operadores físico-digitales
                </p>
                <div class="model-list">
                    {{REDUNDANTES_MODELS}}
                </div>
            </div>
        </div>

        <!-- Threat Matrix -->
        <div class="threat-matrix">
            <div class="matrix-quadrant q1">
                <div class="quadrant-label">✅ Alta Inmunidad, Baja Exposición</div>
                <div class="quadrant-models">
                    {{Q1_MODELS}}
                </div>
            </div>
            <div class="matrix-quadrant q2">
                <div class="quadrant-label">⚡ Alta Inmunidad, Alta Exposición</div>
                <div class="quadrant-models">
                    {{Q2_MODELS}}
                </div>
            </div>
            <div class="matrix-quadrant q3">
                <div class="quadrant-label">⚠️ Baja Inmunidad, Baja Exposición</div>
                <div class="quadrant-models">
                    {{Q3_MODELS}}
                </div>
            </div>
            <div class="matrix-quadrant q4">
                <div class="quadrant-label">🚨 Baja Inmunidad, Alta Exposición</div>
                <div class="quadrant-models">
                    {{Q4_MODELS}}
                </div>
            </div>
        </div>
    </div>

    <!-- Incidents Timeline -->
    <div class="incidents-section">
        <h2 class="section-title">🔥 Incidentes Críticos de la Semana</h2>
        <div class="incident-timeline">
            {{INCIDENTS_LIST}}
        </div>
    </div>

    <!-- Benchmarking Section -->
    <div class="benchmarking-section">
        <h2 class="section-title">📈 Benchmarking Regional</h2>
        
        <div class="percentile-chart">
            <h3 style="font-size: 16px; margin-bottom: 16px;">Distribución de Inmunidad por Percentil</h3>
            <div class="percentile-bar"></div>
            <div class="percentile-markers">
                <span>P0 (Más vulnerable)</span>
                <span>P25</span>
                <span>P50</span>
                <span>P75</span>
                <span>P100 (Más resiliente)</span>
            </div>
        </div>

        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 16px;">
            {{BENCHMARKING_STATS}}
        </div>
    </div>

    <!-- Strategic Recommendations -->
    <div class="recommendations-section">
        <h2 class="section-title">🎯 Recomendaciones Estratégicas</h2>
        <div class="recommendation-grid">
            {{RECOMMENDATIONS_LIST}}
        </div>
    </div>

    <!-- Footer -->
    <div class="footer">
        <p>Digital Immunity Index 4.0 - Framework Modular para Resiliencia Digital</p>
        <p style="margin-top: 8px;">"Asumimos que está comprometido y nos enfocamos en que funcione"</p>
        <div class="footer-links">
            <a href="#">📊 Ver Dashboards Anteriores</a>
            <a href="#">📧 Suscribirse a Alertas</a>
            <a href="#">🔗 Compartir Reporte</a>
        </div>
    </div>
</div>

<script>
// Dynamic content injection points
document.addEventListener('DOMContentLoaded', function() {
    // Add timestamp
    const timestamp = new Date().toLocaleString('es-ES', { 
        timeZone: 'America/Mexico_City',
        dateStyle: 'full',
        timeStyle: 'short'
    });
    
    // Highlight active maturity stage based on average immunity
    const avgImmunity = parseFloat('{{IMMUNITY_AVG}}');
    if (avgImmunity < 4.0) {
        document.querySelector('.stage-fragil').classList.add('active');
    } else if (avgImmunity < 6.0) {
        document.querySelector('.stage-robusto').classList.add('active');
    } else if (avgImmunity < 8.0) {
        document.querySelector('.stage-resiliente').classList.add('active');
    } else {
        document.querySelector('.stage-adaptativo').classList.add('active');
    }
    
    console.log('DII 4.0 Dashboard loaded:', timestamp);
});
</script>
</body>
</html>